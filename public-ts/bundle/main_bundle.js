(()=>{"use strict";var e={163:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function c(e){try{i(n.next(e))}catch(e){a(e)}}function u(e){try{i(n.throw(e))}catch(e){a(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(c,u)}i((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,a,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,n=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){c=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){c.label=a[1];break}if(6===a[0]&&c.label<o[1]){c.label=o[1],o=a;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(a);break}o[2]&&c.ops.pop(),c.trys.pop();continue}a=t.call(e,c)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.profileUpload=t.cartDelete=t.categoryRequest=t.categoryGet=t.avatarUpload=t.cartConfirm=t.cartGet=t.addProductToCart=t.order=t.productArrayRequest=t.product=t.homepage=t.productAdd=t.cookieCheck=t.profile=t.signout=t.signup=t.signin=void 0;var a=r(340),c=r(743),u="https://ozonback.herokuapp.com";t.signin=function(e){console.log(e),c.default.post({url:u+"/login",body:e}).then((function(e){var t=e.responseText;return a.default.emit("signin success",t)})).catch((function(e){var t=e.responseText;return a.default.emit("signin fail",t)}))},t.signup=function(e){console.log(e),c.default.post({url:u+"/signup",body:e}).then((function(e){var t=e.responseText;return a.default.emit("signup success",t)})).catch((function(e){var t=e.responseText;return a.default.emit("signup fail",t)}))},t.signout=function(){c.default.get({url:u+"/logout"}).then((function(){return a.default.emit("logout success",void 0)})).catch((function(e){return console.error(e)}))},t.profile=function(){c.default.get({url:u+"/profile"}).then((function(){return a.default.emit("authorization",void 0)})).catch((function(){return a.default.emit("no authorization",void 0)}))},t.cookieCheck=function(){c.default.get({url:u+"/profile"}).then((function(e){var t=e.responseText;return a.default.emit("cookie check success",t)})).catch((function(e){var t=e.responseText;return a.default.emit("cookie check fail",t)}))},t.productAdd=function(){c.default.get({url:u+"/product/add"})},t.homepage=function(){c.default.get({url:u+"/homepage"}).then((function(e){var t=e.responseText;return a.default.emit("homepage response",t)})).catch((function(e){return console.error(e)}))},t.product=function(e){c.default.get({url:u+"/product?id="+e}).then((function(e){var t=e.responseText;return a.default.emit("product request success",{responseText:t})})).catch((function(e){var t=e.responseText;return a.default.emit("product request fail",{responseText:t})}))},t.productArrayRequest=function(e){return n(void 0,void 0,void 0,(function(){var t;return o(this,(function(r){return t=[],e.forEach((function(r){c.default.get({url:u+"/product?id="+r.product_id}).then((function(e){var t=e.responseText;return JSON.parse(t)})).then((function(e){var t=e;return t.number=r.number,t})).then((function(e){return t.push(e)})).then((function(){t.length===e.length&&a.default.emit("product array request success",t)})).catch((function(e){var t=e.responseText;return a.default.emit("product array request fail",t)}))})),[2]}))}))},t.order=function(){c.default.get({url:u+"/cart/confirm"}).then((function(e){var t=e.responseText;return a.default.emit("order response",t)})).catch((function(e){return console.error(e)}))},t.addProductToCart=function(e){console.log("addProductToCart",e);var t={product_id:e.id,number:e.number};console.log(t),c.default.post({url:u+"/cart/put",body:t}).then((function(e){var t=e.responseText;return a.default.emit("add product to cart success",{responseText:t})})).catch((function(e){var t=e.responseText;return a.default.emit("add product to cart fail",{responseText:t})}))},t.cartGet=function(){c.default.get({url:u+"/cart/get"}).then((function(e){var t=e.responseText;return a.default.emit("cart get success",{responseText:t})})).catch((function(e){var t=e.responseText;return a.default.emit("cart get fail",{responseText:t})}))},t.cartConfirm=function(e){console.log("cart confirm",JSON.stringify(e)),c.default.post({url:u+"/cart/confirm",body:e}).then((function(e){var t=e.responseText;return a.default.emit("cart confirm success",t)})).catch((function(e){var t=e.responseText;return a.default.emit("cart comfirm fail",t)}))},t.avatarUpload=function(e){c.default.avatarUpload({method:"POST",url:u+"/upload/avatar",file:e,callback:function(e,t){e<300?a.default.emit("avatar upload success",{responseText:t}):a.default.emit("avatar upload fail",{responseText:t})}})},t.categoryGet=function(){console.log("category get"),c.default.get({url:u+"/category"}).then((function(e){var t=e.responseText;return a.default.emit("category get success",t)})).catch((function(e){var t=e.responseText;return a.default.emit("category get fail",t)}))},t.categoryRequest=function(e){console.log("categoryRequest",e),c.default.get({url:u+"/category/"+e}).then((function(e){var t=e.responseText;return a.default.emit("category request success",t)})).catch((function(e){var t=e.responseText;return a.default.emit("category request fail",t)}))},t.cartDelete=function(e){console.log("cart delete",e),c.default.post({url:u+"/cart/delete",body:e}).then((function(e){var t=e.responseText;return a.default.emit("cart delete success",t)})).catch((function(e){var t=e.responseText;return a.default.emit("cart delete fail",t)}))},t.profileUpload=function(e){console.log("profile upload",e),c.default.post({url:u+"/profile",body:e}).then((function(e){var t=e.responseText;return a.default.emit("profile upload success",t)})).catch((function(e){var t=e.responseText;return a.default.emit("profile upload fail",t)}))}},91:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(163),o=[{event:"signin ajax request",callback:n.signin},{event:"signup ajax request",callback:n.signup},{event:"signout ajax request",callback:n.signout},{event:"profile ajax request",callback:n.profile},{event:"homepage ajax request",callback:n.homepage},{event:"product ajax request",callback:n.product},{event:"order ajax request",callback:n.order},{event:"cookie check request",callback:n.cookieCheck},{event:"add product to cart request",callback:n.addProductToCart},{event:"cart get request",callback:n.cartGet},{event:"cart confirm request",callback:n.cartConfirm},{event:"product array request",callback:n.productArrayRequest},{event:"product add request",callback:[n.productAdd]},{event:"avatar upload request",callback:[n.avatarUpload]},{event:"category get request",callback:[n.categoryGet]},{event:"category request",callback:[n.categoryRequest]},{event:"cart delete request",callback:[n.cartDelete]},{event:"profile upload request",callback:[n.profileUpload]}];t.default=o},743:function(e,t){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var n,o="GET",a=function(){function e(){}var t;return t=e,e.ajax=function(e){var t=e.method,r=void 0===t?o:t,a=e.url,c=void 0===a?"/":a,u=e.body,i=void 0===u?null:u,s=e.callback,l=void 0===s?function(){}:s,f=new XMLHttpRequest;if(f.open(r,c,!0),f.withCredentials=!0,f.setRequestHeader("X-CSRF-Token",n),f.addEventListener("readystatechange",(function(){f.readyState===XMLHttpRequest.DONE&&(n=f.getResponseHeader("X-Csrf-Token"),l(f.status,f.responseText))})),i)return f.setRequestHeader("Content-type","application/json; charser=utf8"),void f.send(JSON.stringify(i));f.send()},e.get=function(e){return void 0===e&&(e={}),new Promise((function(n,a){t.ajax(r(r({},e),{method:o,callback:function(e,t){e<300?n({status:e,responseText:t}):a({status:e,responseText:t})}}))}))},e.post=function(e){return void 0===e&&(e={}),new Promise((function(n,o){t.ajax(r(r({},e),{method:"POST",callback:function(e,t){e<300?n({status:e,responseText:t}):o({status:e,responseText:t})}}))}))},e.avatarUpload=function(e){var t=e.method,r=void 0===t?o:t,a=e.url,c=void 0===a?"/":a,u=e.callback,i=void 0===u?function(){}:u,s=e.file,l=void 0===s?void 0:s,f=new FormData;f.append("file",l),console.log(f);var d=new XMLHttpRequest;d.open(r,c,!0),d.withCredentials=!0,d.setRequestHeader("X-CSRF-Token",n),d.addEventListener("readystatechange",(function(){d.readyState===XMLHttpRequest.DONE&&(n=d.getResponseHeader("X-Csrf-Token"),i(d.status,d.responseText))})),d.send(f)},e}();t.default=a},340:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]=this.listeners[e]||[],this.listeners[e].includes(t)||this.listeners[e].push(t)},e.prototype.off=function(e,t){this.listeners[e]=this.listeners[e].filter((function(e){return e!==t}))},e.prototype.emit=function(e,t){this.listeners[e]?this.listeners[e].forEach((function(e){return e(t)})):console.log(e+" without listeners")},e.prototype.add=function(e){var t=this;e.forEach((function(e){var r=e.event,n=e.callback;Array.isArray(n)?n.forEach((function(e){t.on(r,e)})):t.on(r,n)}))},e.prototype.delete=function(e){var t=this;e.forEach((function(e){var r=e.event,n=e.callback;Array.isArray(n)?n.forEach((function(e){t.off(r,e)})):t.off(r,n)}))},e}();t.default=new r},683:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.categoryGet=t.cartGet=t.cookieCheck=void 0,t.cookieCheck=function(){console.log("cookieCheck")},t.cartGet=function(){console.log("cartGet")},t.categoryGet=function(){console.log("categoryGet")}},646:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(683),o=[{event:"cookie check request",callback:n.cookieCheck},{event:"cart get request",callback:n.cartGet},{event:"category get request",callback:n.categoryGet}];t.default=o},929:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(91),o=r(340),a=r(646);t.default=function(){o.default.add(n.default),o.default.add(a.default),o.default.emit("cookie check request",void 0),o.default.emit("cart get request",void 0),o.default.emit("category get request",void 0)}}},t={};(0,function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}(929).default)()})();